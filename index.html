<!DOCTYPE html>

<head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jscolor/2.4.0/jscolor.min.js"></script>
    <title>RGB Light Control</title>
</head>


<body onload="show_picker()" style="background-color: black;">
    <meta name="theme-color" content="#000000"/>
    <iframe name="test" id="test" style="display: none;"></iframe>
    <form id="send_color" action="/rgb" method="POST" target="test">
        <button id="picker" class="jscolor_button" data-jscolor=
        "{
            onChange: 'update(this)',
            valueElement:'#rgb1',
            format:'rgb',
            mode:'HSV',
            crossSize: '16',
            value: '#000000',
            backgroundColor: '#000000',
            borderColor:'#000000',
            borderWidth:'0', borderRadius:'0', 
            padding:'0',
            shadow:'false'
        }" style="display: none;">
        </button>
        <input id="rgb1" name="rgb_color" type="hidden">
    </form>
</body>

<script type="text/javascript">
    function show_picker()
    {
        var picker = document.getElementById("picker").jscolor;
        picker.option("sliderSize", 50);
        var slider_size = picker.option("sliderSize");
        var padding = 30;

        picker.option("padding", padding)
        picker.option("height", window.innerHeight - (2 * padding) - 8);
        picker.option("width", window.innerWidth - (3 * padding + slider_size) - 8);
        picker.show();
    }

    function update(picker)
    {
        document.getElementById("send_color").submit();
    }
    
    jscolor.trigger('change');
</script>

</html>